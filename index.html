<!DOCTYPE html>
<html lang="nl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gesprekstafel Boekingssysteem</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        background: #f8f9fa;
        min-height: 100vh;
        padding: 20px;
        color: #333;
        line-height: 1.5;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 8px;
        padding: 40px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      h1 {
        text-align: center;
        margin-bottom: 20px;
        color: #2c3e50;
        font-size: 1.8rem;
        font-weight: 500;
      }

      h2 {
        text-align: center;
        margin-bottom: 30px;
        color: #34495e;
        font-size: 1.3rem;
        font-weight: 500;
        border-bottom: 1px solid #ecf0f1;
        padding-bottom: 30px;
      }

      h3 {
        margin-bottom: 15px;
        color: #2c3e50;
        font-size: 1.1rem;
        font-weight: 500;
      }

      .section {
        margin-bottom: 30px;
        padding: 20px;
        background: #fafbfc;
        border-radius: 6px;
        border: 1px solid #e1e8ed;
      }

      .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
      }

      .form-group {
        display: flex;
        flex-direction: column;
      }

      label {
        margin-bottom: 5px;
        font-weight: 500;
        color: #555;
        font-size: 0.9rem;
      }

      input,
      select,
      button {
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 0.9rem;
        transition: border-color 0.2s ease;
      }

      input:focus,
      select:focus {
        outline: none;
        border-color: #3498db;
      }

      button {
        background: #3498db;
        color: white;
        border: none;
        cursor: pointer;
        font-weight: 500;
        transition: background-color 0.2s ease;
      }

      button:hover {
        background: #2980b9;
      }

      button:disabled {
        background: #bdc3c7;
        cursor: not-allowed;
      }

      .btn-secondary {
        background: #95a5a6;
      }

      .btn-secondary:hover {
        background: #7f8c8d;
      }

      .btn-danger {
        background: #e74c3c;
      }

      .btn-danger:hover {
        background: #c0392b;
      }

      .btn-success {
        background: #27ae60;
      }

      .btn-success:hover {
        background: #229954;
      }

      .btn-signage {
        background: #8e44ad;
        font-size: 1rem;
        padding: 15px 25px;
        margin: 10px;
        border-radius: 6px;
        display: inline-flex;
        align-items: center;
        gap: 10px;
      }

      .btn-signage:hover {
        background: #7d3c98;
      }

      .admin-access-btn {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 40px;
        height: 40px;
        background: #95a5a6;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        font-size: 14px;
        color: white;
        transition: background-color 0.2s ease;
        z-index: 100;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      }

      .admin-access-btn:hover {
        background: #7f8c8d;
      }

      .client-booking-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }

      .client-table-card {
        background: white;
        border-radius: 6px;
        padding: 20px;
        border: 1px solid #e1e8ed;
        transition: box-shadow 0.2s ease;
      }

      .client-table-card:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .table-header {
        text-align: center;
        margin-bottom: 15px;
        padding-bottom: 15px;
        border-bottom: 1px solid #ecf0f1;
      }

      .table-title {
        font-size: 1.1rem;
        font-weight: 500;
        color: #2c3e50;
        margin-bottom: 5px;
      }

      .speakers {
        font-size: 0.9rem;
        color: #7f8c8d;
      }

      .time-slots-container {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .time-slot-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 10px 12px;
        border-radius: 4px;
        border: 1px solid #ddd;
        transition: all 0.2s ease;
      }

      .time-slot-item.available {
        background: #f8fff9;
        border-color: #27ae60;
      }

      .time-slot-item.available:hover {
        background: #e8f5e8;
      }

      .time-slot-item.booked {
        background: #fdf2f2;
        border-color: #e74c3c;
      }

      .time-info {
        font-weight: 500;
        color: #2c3e50;
        font-size: 0.9rem;
      }

      .slot-btn {
        padding: 6px 12px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-weight: 500;
        font-size: 0.8rem;
        transition: background-color 0.2s ease;
      }

      .slot-btn.available {
        background: #27ae60;
        color: white;
      }

      .slot-btn.available:hover {
        background: #229954;
      }

      .slot-btn.booked {
        background: #bdc3c7;
        color: #7f8c8d;
        cursor: not-allowed;
      }

      .modal {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        padding: 25px;
        border-radius: 6px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        z-index: 1000;
        min-width: 350px;
        max-width: 500px;
      }

      .overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
      }

      .close-btn {
        position: absolute;
        top: 10px;
        right: 10px;
        background: none;
        border: none;
        font-size: 18px;
        cursor: pointer;
        color: #7f8c8d;
      }

      .status-message {
        padding: 10px;
        border-radius: 4px;
        margin-top: 10px;
        text-align: center;
        font-size: 0.9rem;
      }

      .success {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }

      .error {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }

      .warning {
        background: #fff3cd;
        color: #856404;
        border: 1px solid #ffeaa7;
      }

      .nav-tabs {
        display: flex;
        margin-bottom: 20px;
        border-bottom: 1px solid #dee2e6;
      }

      .nav-tab {
        padding: 10px 20px;
        background: none;
        border: none;
        border-bottom: 2px solid transparent;
        cursor: pointer;
        font-weight: 500;
        color: #6c757d;
        transition: all 0.2s ease;
      }

      .nav-tab.active {
        color: #3498db;
        border-bottom-color: #3498db;
      }

      .nav-tab:hover {
        color: #3498db;
      }

      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
      }

      .admin-interface {
        display: none;
      }

      .client-interface {
        display: block;
      }

      .tables-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 15px;
        margin-top: 20px;
      }

      .table-card {
        padding: 15px;
        border: 1px solid #e1e8ed;
        border-radius: 6px;
        background: white;
      }

      .bookings-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        font-size: 0.9rem;
      }

      .bookings-table th,
      .bookings-table td {
        padding: 10px;
        border: 1px solid #dee2e6;
        text-align: left;
      }

      .bookings-table th {
        background: #f8f9fa;
        font-weight: 500;
      }

      .bookings-table tr:nth-child(even) {
        background: #f8f9fa;
      }

      .event-info {
        text-align: center;
        margin-bottom: 20px;
        color: #6c757d;
        font-size: 0.95rem;
      }

      .booking-actions {
        display: flex;
        gap: 10px;
        margin-top: 15px;
      }

      .confirmation-details {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 4px;
        margin: 15px 0;
        border: 1px solid #e9ecef;
      }

      .email-preview {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 4px;
        margin-top: 15px;
        border: 1px solid #e9ecef;
      }

      .hidden {
        display: none;
      }

      .admin-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .admin-user-info {
        display: flex;
        align-items: center;
        gap: 15px;
        color: #666;
        font-size: 0.9rem;
      }

      .connection-status {
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 0.7rem;
        font-weight: 400;
        z-index: 200;
        transition: all 0.3s ease;
        opacity: 0.7;
      }

      .connection-status.connected {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }

      .connection-status.disconnected {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }

      .sync-indicator {
        display: inline-block;
        width: 6px;
        height: 6px;
        border-radius: 50%;
        margin-right: 6px;
        animation: pulse 2s infinite;
      }

      .sync-indicator.syncing {
        background: #ffc107;
      }

      .sync-indicator.synced {
        background: #28a745;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }

      .loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.9);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 2000;
        font-size: 1.2rem;
        color: #666;
      }

      .firebase-config-section {
        background: #e7f3ff;
        border: 1px solid #b3d4fc;
        padding: 15px;
        border-radius: 4px;
        margin-bottom: 20px;
      }

      .firebase-config-section h3 {
        color: #0c5aa6;
        margin-bottom: 10px;
      }

      .config-form {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        margin-bottom: 15px;
      }

      .config-form input {
        font-size: 0.8rem;
        padding: 8px;
      }

      .config-actions {
        display: flex;
        gap: 10px;
      }

      .auth-section {
        background: #f0f8ff;
        border: 1px solid #b3d4fc;
        padding: 15px;
        border-radius: 4px;
        margin-bottom: 20px;
      }

      .auth-section h3 {
        color: #0c5aa6;
        margin-bottom: 10px;
      }

      .auth-form {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        margin-bottom: 15px;
      }

      .auth-actions {
        display: flex;
        gap: 10px;
        align-items: center;
      }

      .user-management {
        background: #fff3cd;
        border: 1px solid #ffeaa7;
        padding: 15px;
        border-radius: 4px;
        margin-bottom: 20px;
      }

      .user-management h3 {
        color: #856404;
        margin-bottom: 10px;
      }

      .export-container {
        position: fixed;
        top: -9999px;
        left: -9999px;
        width: 210mm;
        max-width: 210mm;
        min-height: 297mm;
        background: white;
        padding: 15mm;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        line-height: 1.4;
        box-sizing: border-box;
        font-size: 14px;
      }

      .export-header {
        text-align: center;
        margin-bottom: 25px;
        border-bottom: 3px solid #2c3e50;
        padding-bottom: 15px;
      }

      .export-title {
        font-size: 28px;
        font-weight: bold;
        color: #2c3e50;
        margin-bottom: 8px;
      }

      .export-subtitle {
        font-size: 16px;
        color: #666;
        margin-bottom: 4px;
      }

      .export-table {
        margin-bottom: 25px;
        border: 2px solid #ddd;
        border-radius: 8px;
        overflow: hidden;
        break-inside: avoid;
      }

      .export-table-header {
        background: #f8f9fa;
        padding: 15px 20px;
        border-bottom: 2px solid #ddd;
      }

      .export-table-name {
        font-size: 20px;
        font-weight: bold;
        color: #2c3e50;
        margin-bottom: 6px;
      }

      .export-table-speakers {
        font-size: 16px;
        color: #666;
      }

      .export-slots {
        padding: 0;
      }

      .export-slot {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 20px;
        border-bottom: 1px solid #f0f0f0;
        font-size: 16px;
        min-height: 50px;
      }

      .export-slot:last-child {
        border-bottom: none;
      }

      .export-slot.booked {
        background: #fff3cd;
        border-left: 6px solid #ffc107;
      }

      .export-slot.available {
        background: #d4edda;
        border-left: 6px solid #28a745;
      }

      .export-time {
        font-weight: bold;
        color: #2c3e50;
        min-width: 120px;
        font-size: 16px;
      }

      .export-booking-info {
        flex: 1;
        text-align: center;
        font-weight: bold;
        font-size: 16px;
      }

      .export-booking-info.booked {
        color: #856404;
      }

      .export-booking-info.available {
        color: #155724;
        font-style: italic;
      }

      .export-summary {
        margin-top: 25px;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 8px;
        border: 2px solid #e9ecef;
        page-break-inside: avoid;
      }

      .export-summary h4 {
        color: #2c3e50;
        margin-bottom: 15px;
        font-size: 20px;
      }

      .export-summary-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
        font-size: 16px;
      }

      .export-summary-item {
        padding: 8px 0;
      }

      /* Real-time 4K Signage Styles */
      .signage-container {
        position: fixed;
        top: -9999px;
        left: -9999px;
        width: 3840px;
        height: 2160px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 60px;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        box-sizing: border-box;
        color: white;
        overflow: hidden;
      }

      .signage-header {
        text-align: center;
        margin-bottom: 40px;
        border-bottom: 4px solid rgba(255, 255, 255, 0.3);
        padding-bottom: 30px;
      }

      .signage-title {
        font-size: 72px;
        font-weight: bold;
        margin-bottom: 15px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      }

      .signage-subtitle {
        font-size: 36px;
        margin-bottom: 8px;
        opacity: 0.9;
      }

      .signage-tables-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(480px, 1fr));
        gap: 30px;
        margin-bottom: 40px;
      }

      .signage-table {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 16px;
        overflow: hidden;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        color: #333;
      }

      .signage-table-header {
        background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        padding: 20px;
        color: white;
        text-align: center;
      }

      .signage-table-name {
        font-size: 28px;
        font-weight: bold;
        margin-bottom: 8px;
      }

      .signage-table-speakers {
        font-size: 20px;
        opacity: 0.9;
      }

      .signage-slots {
        padding: 15px;
        max-height: 600px;
        overflow-y: auto;
      }

      .signage-slot {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 16px;
        margin-bottom: 8px;
        border-radius: 8px;
        font-size: 18px;
        min-height: 50px;
      }

      .signage-slot.available {
        background: #d4edda;
        border-left: 6px solid #28a745;
      }

      .signage-slot.booked {
        background: #fff3cd;
        border-left: 6px solid #ffc107;
      }

      .signage-time {
        font-weight: bold;
        font-size: 20px;
        min-width: 140px;
      }

      .signage-booking-info {
        flex: 1;
        text-align: center;
        font-weight: bold;
        font-size: 18px;
      }

      .signage-booking-info.booked {
        color: #856404;
      }

      .signage-booking-info.available {
        color: #155724;
        font-style: italic;
      }

      .signage-footer {
        position: absolute;
        bottom: 60px;
        left: 60px;
        right: 60px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: rgba(255, 255, 255, 0.1);
        padding: 20px 30px;
        border-radius: 12px;
        backdrop-filter: blur(10px);
      }

      .signage-stats {
        display: flex;
        gap: 40px;
        font-size: 24px;
      }

      .signage-stat {
        text-align: center;
      }

      .signage-stat-number {
        font-size: 32px;
        font-weight: bold;
        display: block;
      }

      .signage-generated {
        font-size: 20px;
        opacity: 0.8;
      }

      /* Live Signage Display (Full Screen) */
      .live-signage-stats {
        display: flex;
        gap: 4vh;
        font-size: 2.2vh;
      }

      .live-signage-stat {
        text-align: center;
      }

      .live-signage-stat-number {
        font-size: 3vh;
        font-weight: bold;
        display: block;
        margin-bottom: 0.5vh;
      }

      .live-signage-generated {
        font-size: 1.8vh;
        opacity: 0.8;
      }

      .live-signage-controls {
        position: fixed;
        top: 2vh;
        left: 2vh;
        display: flex;
        gap: 1vh;
        z-index: 10001;
      }

      .live-signage-control-btn {
        background: rgba(0, 0, 0, 0.5);
        border: none;
        color: white;
        padding: 1vh 2vh;
        border-radius: 0.5vh;
        cursor: pointer;
        font-size: 1.6vh;
        backdrop-filter: blur(0.5vh);
        transition: background-color 0.3s ease;
      }

      .live-signage-control-btn:hover {
        background: rgba(0, 0, 0, 0.7);
      }

      .signage-launch-section {
        background: linear-gradient(135deg, #8e44ad, #9b59b6);
        border: 1px solid #8e44ad;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
        color: white;
      }

      .signage-launch-section h3 {
        color: white;
        margin-bottom: 15px;
      }

      .signage-controls {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
        align-items: center;
      }

      .signage-url-info {
        background: rgba(255, 255, 255, 0.1);
        padding: 10px;
        border-radius: 4px;
        margin-top: 15px;
        font-size: 0.9rem;
      }

      .url-copy-btn {
        background: rgba(255, 255, 255, 0.2);
        border: none;
        color: white;
        padding: 5px 10px;
        border-radius: 3px;
        cursor: pointer;
        font-size: 0.8rem;
        margin-left: 10px;
      }

      .url-copy-btn:hover {
        background: rgba(255, 255, 255, 0.3);
      }
    </style>
  </head>
  <body>
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
      <div>
        <div class="sync-indicator syncing"></div>
        Laden...
      </div>
    </div>

    <!-- Connection Status -->
    <div id="connectionStatus" class="connection-status disconnected">
      <span class="sync-indicator syncing"></span>â—‹
    </div>

    <!-- Live Signage Display (Full Screen) -->
    <div id="liveSignageDisplay" class="live-signage-display">
      <div class="live-signage-controls">
        <button class="live-signage-control-btn" onclick="exitSignageMode()">
          âœ• Sluiten
        </button>
        <button class="live-signage-control-btn" onclick="toggleFullscreen()">
          â›¶ Volledig Scherm
        </button>
        <button class="live-signage-control-btn" onclick="refreshSignageData()">
          â†» Vernieuwen
        </button>
      </div>
      
      <div class="live-signage-update-indicator" id="liveSignageUpdateIndicator">
        <span class="sync-indicator synced"></span>
        <span id="lastUpdateTime">Laden...</span>
      </div>
      
      <div class="live-signage-content">
        <div class="live-signage-header">
          <div class="live-signage-title">Gesprekstafel Schema</div>
          <div class="live-signage-subtitle" id="liveSignageEventDate">Evenement datum wordt geladen...</div>
          <div class="live-signage-subtitle" id="liveSignageEventTime">Tijd wordt geladen...</div>
        </div>
        
        <div class="live-signage-tables" id="liveSignageTables">
          Laden...
        </div>
        
        <div class="live-signage-footer">
          <div class="live-signage-stats">
            <div class="live-signage-stat">
              <span class="live-signage-stat-number" id="liveSignageTableCount">0</span>
              <span>Tafels</span>
            </div>
            <div class="live-signage-stat">
              <span class="live-signage-stat-number" id="liveSignageBookedCount">0</span>
              <span>Geboekt</span>
            </div>
            <div class="live-signage-stat">
              <span class="live-signage-stat-number" id="liveSignageAvailableCount">0</span>
              <span>Beschikbaar</span>
            </div>
            <div class="live-signage-stat">
              <span class="live-signage-stat-number" id="liveSignageOccupancyRate">0%</span>
              <span>Bezetting</span>
            </div>
          </div>
          <div class="live-signage-generated" id="liveSignageLastUpdate">
            Laatst bijgewerkt: Laden...
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <!-- CLIENT INTERFACE -->
      <div id="client-interface" class="client-interface">
        <h1>Ostend Is Music Sectordag 2025</h1>
        <h2>Expertenhub: boek je gesprekstafel(s)!</h2>
        <div class="event-info" id="eventInfo">Evenement informatie wordt geladen...</div>
        <div class="client-booking-grid" id="clientBookingGrid">
          Beschikbare tijdslots worden geladen...
        </div>
      </div>

      <!-- ADMIN ACCESS BUTTON -->
      <button
        class="admin-access-btn"
        onclick="showLoginModal()"
        title="Admin Toegang"
      >
        âš™
      </button>

      <!-- ADMIN INTERFACE -->
      <div id="admin-interface" class="admin-interface">
        <div class="admin-header">
          <h1>Admin Dashboard</h1>
          <div class="admin-user-info">
            <span id="adminUserEmail"></span>
            <button onclick="logout()" class="btn-secondary">Uitloggen</button>
            <button onclick="switchToClient()" class="btn-secondary">
              Terug naar Boekingen
            </button>
          </div>
        </div>

        <!-- LIVE SIGNAGE LAUNCH SECTION -->
        <div class="signage-launch-section">
          <h3>ðŸ“º Live Signage Display</h3>
          <p style="margin-bottom: 15px; font-size: 0.9rem; opacity: 0.9;">
            Start een real-time planning display voor TV monitors en beeldschermen. Updates automatisch bij nieuwe boekingen!
          </p>
          <div class="signage-controls">
            <button onclick="openLiveSignage()" class="btn-signage">
              ðŸš€ Open Live Signage Scherm
            </button>
            <button onclick="openSignageInNewWindow()" class="btn-signage">
              ðŸ“º Open in Nieuw Venster
            </button>
            <button onclick="copySignageURL()" class="btn-signage">
              ðŸ“‹ Kopieer Signage URL
            </button>
          </div>
          <div class="signage-url-info">
            <strong>ðŸ’¡ Tips:</strong><br>
            â€¢ Gebruik "Open in Nieuw Venster" voor tweede monitor<br>
            â€¢ Klik "Volledig Scherm" voor beste TV weergave<br>
            â€¢ Schema wordt automatisch elke 3 seconden bijgewerkt<br>
            â€¢ Nieuwe boekingen worden met een highlight-animatie getoond
            <button onclick="copySignageURL()" class="url-copy-btn">Kopieer URL</button>
          </div>
        </div>

        <!-- FIREBASE CONFIGURATION SECTION -->
        <div class="firebase-config-section">
          <h3>Firebase Configuratie</h3>
          <p style="margin-bottom: 15px; font-size: 0.9rem; color: #0c5aa6;">
            <strong>âœ… Firebase is al geconfigureerd!</strong> Uw "ostend-is-music" project is klaar voor realtime synchronisatie.<br>
            U kunt de configuratie hieronder bijwerken indien nodig, of de huidige setup blijven gebruiken.
          </p>
          
          <details style="margin-bottom: 15px; padding: 10px; background: #f8f9fa; border-radius: 4px; border: 1px solid #e1e8ed;">
            <summary style="cursor: pointer; font-weight: 500; color: #2c3e50;">Hoe Firebase Configuratie te verkrijgen</summary>
            <div style="margin-top: 10px; font-size: 0.85rem; line-height: 1.4;">
              <ol>
                <li>Ga naar <a href="https://console.firebase.google.com" target="_blank">Firebase Console</a></li>
                <li>Maak een nieuw project aan of selecteer een bestaand project</li>
                <li>Ga naar Project Instellingen (tandwiel icoon) â†’ Algemeen tabblad</li>
                <li>Scroll naar beneden naar "Uw apps" sectie</li>
                <li>Voeg een web app toe of selecteer een bestaande web app</li>
                <li>Kopieer de configuratiewaarden uit het Firebase SDK snippet</li>
                <li><strong>Vergeet niet Firestore Database en Authentication in te schakelen!</strong></li>
              </ol>
            </div>
          </details>
          
          <div class="config-form">
            <input type="text" id="firebaseApiKey" placeholder="Firebase API Sleutel" />
            <input type="text" id="firebaseAuthDomain" placeholder="Auth Domein (project-id.firebaseapp.com)" />
            <input type="text" id="firebaseProjectId" placeholder="Project ID" />
            <input type="text" id="firebaseStorageBucket" placeholder="Storage Bucket" />
            <input type="text" id="firebaseMessagingSenderId" placeholder="Messaging Sender ID" />
            <input type="text" id="firebaseAppId" placeholder="App ID" />
          </div>
          <div class="config-actions">
            <button onclick="updateFirebaseConfig()" class="btn-success">Configuratie Bijwerken</button>
            <button onclick="testFirebaseConnection()" class="btn-secondary">Verbinding Testen</button>
            <button onclick="resetToDemo()" class="btn-secondary">Config Wissen (Offline Modus)</button>
          </div>
          <div id="firebaseConfigStatus" class="status-message" style="display: none"></div>
        </div>

        <!-- EMAILJS CONFIGURATION SECTION -->
        <div class="firebase-config-section" style="background: #f0f8ff;">
          <h3>EmailJS Configuratie</h3>
          <p style="margin-bottom: 15px; font-size: 0.9rem; color: #0c5aa6;">
            Configureer EmailJS om automatisch boekingsbevestigingen naar gebruikers te sturen.
          </p>
          
          <details style="margin-bottom: 15px; padding: 10px; background: #f8f9fa; border-radius: 4px; border: 1px solid #e1e8ed;">
            <summary style="cursor: pointer; font-weight: 500; color: #2c3e50;">Hoe EmailJS Configuratie te verkrijgen</summary>
            <div style="margin-top: 10px; font-size: 0.85rem; line-height: 1.4;">
              <ol>
                <li>Ga naar <a href="https://www.emailjs.com" target="_blank">EmailJS.com</a> en maak een gratis account aan</li>
                <li>Maak een e-mailservice aan (Gmail, Outlook, etc.)</li>
                <li>Maak een e-mailtemplate aan met deze variabelen: {{user_name}}, {{user_email}}, {{artist_name}}, {{table_name}}, {{speakers}}, {{event_date}}, {{time_slot}}</li>
                <li>Verkrijg uw Service ID vanaf de Email Services pagina</li>
                <li>Verkrijg uw Template ID vanaf de Email Templates pagina</li>
                <li>Verkrijg uw Public Key vanaf Account Settings â†’ API Keys</li>
              </ol>
            </div>
          </details>
          
          <div class="config-form">
            <input type="text" id="emailServiceId" placeholder="EmailJS Service ID" />
            <input type="text" id="emailTemplateId" placeholder="EmailJS Template ID" />
            <input type="text" id="emailPublicKey" placeholder="EmailJS Public Key" />
            <input type="text" id="emailFromName" placeholder="Afzender Naam (bijv. Event Team)" />
          </div>
          <div class="config-actions">
            <button onclick="updateEmailConfig()" class="btn-success">E-mail Configuratie Bijwerken</button>
            <button onclick="testEmailConfig()" class="btn-secondary">Test E-mail Versturen</button>
          </div>
          <div id="emailConfigStatus" class="status-message" style="display: none"></div>
        </div>

        <!-- USER MANAGEMENT SECTION -->
        <div class="user-management">
          <h3>Admin Gebruikersbeheer</h3>
          <p style="margin-bottom: 15px; font-size: 0.9rem;">
            Maak admin gebruikers aan die toegang hebben tot dit dashboard. Gebruikers ontvangen een e-mail om hun wachtwoord in te stellen.
          </p>
          <div class="auth-form">
            <input type="email" id="newUserEmail" placeholder="Admin E-mail" />
            <input type="password" id="newUserPassword" placeholder="Tijdelijk Wachtwoord (min 6 tekens)" />
          </div>
          <div class="auth-actions">
            <button onclick="createAdminUser()" class="btn-success">Admin Gebruiker Aanmaken</button>
            <button onclick="changePassword()" class="btn-secondary">Mijn Wachtwoord Wijzigen</button>
          </div>
          <div id="userManagementStatus" class="status-message" style="display: none"></div>
        </div>

        <div class="nav-tabs">
          <button class="nav-tab active" onclick="switchTab('setup')">
            Evenement Instellen
          </button>
          <button class="nav-tab" onclick="switchTab('bookings')">
            Boekingen Beheren
          </button>
          <button class="nav-tab" onclick="switchTab('export')">
            Exporteren & Rapporten
          </button>
        </div>

        <div id="setup-tab" class="tab-content active">
          <div class="section">
            <h2>Evenement Configuratie</h2>
            <div class="form-grid">
              <div class="form-group">
                <label for="eventDate">Evenement Datum:</label>
                <input type="date" id="eventDate" />
              </div>
              <div class="form-group">
                <label for="startTime">Starttijd:</label>
                <input type="time" id="startTime" value="09:00" />
              </div>
              <div class="form-group">
                <label for="endTime">Eindtijd:</label>
                <input type="time" id="endTime" value="17:00" />
              </div>
              <div class="form-group">
                <label for="slotDuration">Tijdslot Duur (minuten):</label>
                <input
                  type="number"
                  id="slotDuration"
                  value="10"
                  min="5"
                  max="30"
                />
              </div>
            </div>
            <button onclick="generateTimeSlots()">Tijdslots Genereren</button>
            <div
              id="eventStatus"
              class="status-message"
              style="display: none"
            ></div>
          </div>

          <div class="section">
            <h2>Tafel Configuratie</h2>
            <div class="form-grid">
              <div class="form-group">
                <label for="tableName">Tafel Naam:</label>
                <input
                  type="text"
                  id="tableName"
                  placeholder="bijv. AI & Technologie"
                />
              </div>
              <div class="form-group">
                <label for="speaker1">Spreker 1:</label>
                <input type="text" id="speaker1" placeholder="Spreker naam" />
              </div>
              <div class="form-group">
                <label for="speaker2">Spreker 2:</label>
                <input type="text" id="speaker2" placeholder="Spreker naam" />
              </div>
            </div>
            <button onclick="addTable()">Tafel Toevoegen</button>

            <div class="tables-grid" id="tablesGrid"></div>
          </div>
        </div>

        <div id="bookings-tab" class="tab-content">
          <div class="section">
            <h2>Huidige Boekingen</h2>
            <div id="bookingsOverview">Boekingen worden geladen...</div>
          </div>
        </div>

        <div id="export-tab" class="tab-content">
          <div class="section">
            <h2>Exporteren & Rapporten</h2>
            <button class="btn-success" onclick="exportToCSV()">
              Exporteren naar CSV
            </button>
            <button
              class="btn-success"
              onclick="exportToExcel()"
              style="margin-left: 10px"
            >
              Exporteren naar Excel
            </button>
            <button
              class="btn-success"
              onclick="exportToJPG()"
              style="margin-left: 10px"
            >
              Exporteren naar JPG (Printbaar)
            </button>
            <button
              class="btn-success"
              onclick="exportTo4KSignage()"
              style="margin-left: 10px"
            >
              Exporteren naar 4K Signage (TV)
            </button>
            <div
              id="exportStatus"
              class="status-message"
              style="display: none"
            ></div>
          </div>
        </div>
      </div>

      <!-- MODALS -->
      <div class="overlay" id="overlay"></div>

      <!-- LOGIN MODAL -->
      <div class="modal" id="loginModal">
        <form onsubmit="loginAdmin(); return false;">
          <h3>Admin Inloggen</h3>
          <div class="form-group">
            <label for="adminEmail">E-mail:</label>
            <input
              type="email"
              id="adminEmail"
              placeholder="Voer admin e-mail in"
              style="width: 100%; margin-bottom: 15px"
              required
            />
          </div>
          <div class="form-group">
            <label for="adminPassword">Wachtwoord:</label>
            <input
              type="password"
              id="adminPassword"
              placeholder="Voer wachtwoord in"
              onkeypress="if(event.key==='Enter') loginAdmin()"
              style="width: 100%; margin-bottom: 15px"
              required
            />
          </div>
          <div style="text-align: center">
            <button type="submit" style="margin-right: 10px">
              Inloggen
            </button>
            <button type="button" onclick="closeLoginModal()" class="btn-secondary">
              Annuleren
            </button>
          </div>
          <div
            id="loginError"
            class="status-message error"
            style="display: none"
          ></div>
        </form>
      </div>

      <!-- PASSWORD CHANGE MODAL -->
      <div class="modal" id="passwordChangeModal">
        <form onsubmit="updatePassword(); return false;">
          <h3>Wachtwoord Wijzigen</h3>
          <div class="form-group">
            <label for="currentPassword">Huidige Wachtwoord:</label>
            <input
              type="password"
              id="currentPassword"
              placeholder="Voer huidige wachtwoord in"
              style="width: 100%; margin-bottom: 15px"
              required
            />
          </div>
          <div class="form-group">
            <label for="newPassword">Nieuwe Wachtwoord:</label>
            <input
              type="password"
              id="newPassword"
              placeholder="Voer nieuw wachtwoord in (min 6 tekens)"
              style="width: 100%; margin-bottom: 15px"
              minlength="6"
              required
            />
          </div>
          <div class="form-group">
            <label for="confirmPassword">Bevestig Wachtwoord:</label>
            <input
              type="password"
              id="confirmPassword"
              placeholder="Bevestig nieuw wachtwoord"
              style="width: 100%; margin-bottom: 15px"
              minlength="6"
              required
            />
          </div>
          <div style="text-align: center">
            <button type="submit" style="margin-right: 10px">
              Wachtwoord Bijwerken
            </button>
            <button type="button" onclick="closePasswordChangeModal()" class="btn-secondary">
              Annuleren
            </button>
          </div>
          <div
            id="passwordChangeStatus"
            class="status-message"
            style="display: none"
          ></div>
        </form>
      </div>

      <!-- BOOKING FORM -->
      <div class="modal" id="bookingForm">
        <button class="close-btn" onclick="closeBookingForm()">&times;</button>
        <form onsubmit="confirmBooking(); return false;">
          <h3>Boek Uw Gesprek</h3>
          <div class="form-group">
            <label for="userName">Uw Naam: *</label>
            <input type="text" id="userName" required />
          </div>
          <div class="form-group">
            <label for="userEmail">E-mail: *</label>
            <input type="email" id="userEmail" required onblur="checkEmailBookingLimit()" />
            <div id="emailBookingStatus" class="status-message" style="display: none; margin-top: 5px; text-align: left; padding: 5px;"></div>
          </div>
          <div class="form-group">
            <label for="userArtistName">Artiest Naam/Band: *</label>
            <input type="text" id="userArtistName" required />
          </div>
          <div class="form-group">
            <label>Geselecteerd Tijdslot:</label>
            <div id="selectedSlotInfo" class="confirmation-details"></div>
          </div>
          <div class="booking-actions">
            <button type="submit" id="confirmBookingBtn">Boeking Bevestigen</button>
          </div>
          <div
            id="bookingStatus"
            class="status-message"
            style="display: none"
          ></div>
        </form>
      </div>

      <!-- CONFIRMATION MODAL -->
      <div class="modal" id="confirmationModal">
        <button class="close-btn" onclick="closeConfirmationModal()">
          &times;
        </button>
        <h3>Boeking Bevestigd</h3>
        <div id="confirmationDetails"></div>
        <div class="booking-actions">
          <button onclick="addToCalendar()">Toevoegen aan Kalender</button>
        </div>
        <div id="emailPreview" class="email-preview hidden"></div>
      </div>
    </div>

    <!-- Hidden container for export -->
    <div id="exportContainer" class="export-container"></div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    
    <!-- EmailJS SDK -->
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"
    ></script>
    
    <!-- html2canvas SDK -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <script>
      // Firebase and Database Configuration
      let db = null;
      let auth = null;
      let isFirebaseInitialized = false;
      let isOnline = false;
      let unsubscribeListeners = [];
      let currentUser = null;

      // Live Signage Variables
      let isSignageMode = false;
      let signageUpdateInterval = null;
      let previousBookingsSnapshot = {};
      let newBookingHighlights = new Set();

      // Your Firebase configuration
      const DEFAULT_FIREBASE_CONFIG = {
        apiKey: "AIzaSyDTG9ciegpaJBvy4LZt9s9TdemnNAyz1EQ",
        authDomain: "ostend-is-music.firebaseapp.com",
        projectId: "ostend-is-music",
        storageBucket: "ostend-is-music.firebasestorage.app",
        messagingSenderId: "481655541764",
        appId: "1:481655541764:web:60b142aafa966c24466551",
        measurementId: "G-PH6EPPW3BY"
      };

      // EmailJS Configuration
      let EMAILJS_CONFIG = {
        serviceId: "service_0m2owju", // Replace with your EmailJS service ID
        templateId: "template_7xq3pho", // Replace with your EmailJS template ID
        publicKey: "VehBeO9qQGs5TbvvnY", // Replace with your EmailJS public key
        fromName: "Event Team"
      };

      // Global data storage (fallback for offline mode)
      let localData = {
        eventConfig: {
          date: "",
          startTime: "09:00",
          endTime: "17:00",
          slotDuration: 10,
          timeSlots: [],
        },
        tables: [],
        bookings: {}
      };

      // Constants
      const MAX_BOOKINGS_PER_EMAIL = 3;
      let currentBookingConfirmation = null;
      let currentBookingSelection = null;
      let isAdminMode = false;

      // Live Signage Functions
      function openLiveSignage() {
        const signageDisplay = document.getElementById('liveSignageDisplay');
        signageDisplay.classList.add('active');
        isSignageMode = true;
        
        // Initialize signage data
        updateLiveSignageDisplay();
        
        // Start auto-refresh
        startSignageAutoRefresh();
        
        // Try to enter fullscreen
        if (signageDisplay.requestFullscreen) {
          signageDisplay.requestFullscreen();
        } else if (signageDisplay.webkitRequestFullscreen) {
          signageDisplay.webkitRequestFullscreen();
        } else if (signageDisplay.msRequestFullscreen) {
          signageDisplay.msRequestFullscreen();
        }
      }

      function openSignageInNewWindow() {
        const currentUrl = window.location.href;
        const signageUrl = currentUrl + (currentUrl.includes('?') ? '&' : '?') + 'signage=1';
        
        const newWindow = window.open(
          signageUrl, 
          'LiveSignage', 
          'fullscreen=yes,scrollbars=no,resizable=yes,width=' + screen.width + ',height=' + screen.height
        );
        
        if (newWindow) {
          newWindow.focus();
        } else {
          alert('Pop-up werd geblokkeerd. Schakel pop-ups in voor deze website.');
        }
      }

      function copySignageURL() {
        const currentUrl = window.location.href;
        const signageUrl = currentUrl + (currentUrl.includes('?') ? '&' : '?') + 'signage=1';
        
        if (navigator.clipboard && window.isSecureContext) {
          navigator.clipboard.writeText(signageUrl).then(() => {
            alert('Signage URL gekopieerd naar klembord!');
          }).catch(() => {
            fallbackCopyTextToClipboard(signageUrl);
          });
        } else {
          fallbackCopyTextToClipboard(signageUrl);
        }
      }

      function fallbackCopyTextToClipboard(text) {
        const textArea = document.createElement("textarea");
        textArea.value = text;
        textArea.style.top = "0";
        textArea.style.left = "0";
        textArea.style.position = "fixed";
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        try {
          document.execCommand('copy');
          alert('Signage URL gekopieerd naar klembord!');
        } catch (err) {
          alert('KopiÃ«ren mislukt. URL: ' + text);
        }
        document.body.removeChild(textArea);
      }

      function exitSignageMode() {
        const signageDisplay = document.getElementById('liveSignageDisplay');
        signageDisplay.classList.remove('active');
        isSignageMode = false;
        
        // Stop auto-refresh
        if (signageUpdateInterval) {
          clearInterval(signageUpdateInterval);
          signageUpdateInterval = null;
        }
        
        // Exit fullscreen
        if (document.exitFullscreen) {
          document.exitFullscreen();
        } else if (document.webkitExitFullscreen) {age-display {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        overflow: hidden;
        z-index: 10000;
        display: none;
      }

      .live-signage-display.active {
        display: block;
      }

      .live-signage-content {
        width: 100%;
        height: 100%;
        padding: 2vh;
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
      }

      .live-signage-header {
        text-align: center;
        margin-bottom: 2vh;
        border-bottom: 0.3vh solid rgba(255, 255, 255, 0.3);
        padding-bottom: 2vh;
        flex-shrink: 0;
      }

      .live-signage-title {
        font-size: 6vh;
        font-weight: bold;
        margin-bottom: 1vh;
        text-shadow: 0.2vh 0.2vh 0.4vh rgba(0, 0, 0, 0.3);
      }

      .live-signage-subtitle {
        font-size: 3vh;
        opacity: 0.9;
        margin-bottom: 0.5vh;
      }

      .live-signage-update-indicator {
        position: fixed;
        top: 2vh;
        right: 2vh;
        background: rgba(255, 255, 255, 0.2);
        padding: 1vh 2vh;
        border-radius: 2vh;
        font-size: 2vh;
        backdrop-filter: blur(1vh);
        display: flex;
        align-items: center;
        gap: 1vh;
      }

      .live-signage-tables {
        flex: 1;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(35vw, 1fr));
        gap: 2vh;
        overflow-y: auto;
        margin-bottom: 2vh;
      }

      .live-signage-table-card {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 1.5vh;
        overflow: hidden;
        box-shadow: 0 0.8vh 3.2vh rgba(0, 0, 0, 0.2);
        color: #333;
        display: flex;
        flex-direction: column;
      }

      .live-signage-table-header {
        background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        padding: 2vh;
        color: white;
        text-align: center;
        flex-shrink: 0;
      }

      .live-signage-table-name {
        font-size: 2.5vh;
        font-weight: bold;
        margin-bottom: 0.5vh;
        line-height: 1.2;
      }

      .live-signage-table-speakers {
        font-size: 1.8vh;
        opacity: 0.9;
      }

      .live-signage-table-slots {
        padding: 1.5vh;
        flex: 1;
        overflow-y: auto;
      }

      .live-signage-slot {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1vh 1.5vh;
        margin-bottom: 0.8vh;
        border-radius: 0.8vh;
        font-size: 1.6vh;
        min-height: 4vh;
        transition: all 0.3s ease;
      }

      .live-signage-slot.available {
        background: #d4edda;
        border-left: 0.6vh solid #28a745;
      }

      .live-signage-slot.booked {
        background: #fff3cd;
        border-left: 0.6vh solid #ffc107;
      }

      .live-signage-slot.new-booking {
        animation: highlightNewBooking 3s ease-out;
      }

      @keyframes highlightNewBooking {
        0% { 
          transform: scale(1.05);
          box-shadow: 0 0 2vh rgba(255, 193, 7, 0.8);
        }
        50% { 
          transform: scale(1.02);
          box-shadow: 0 0 1vh rgba(255, 193, 7, 0.6);
        }
        100% { 
          transform: scale(1);
          box-shadow: none;
        }
      }

      .live-signage-slot-time {
        font-weight: bold;
        font-size: 1.8vh;
        min-width: 12vh;
        color: #2c3e50;
      }

      .live-signage-booking-info {
        flex: 1;
        text-align: center;
        font-weight: bold;
        font-size: 1.6vh;
      }

      .live-signage-booking-info.booked {
        color: #856404;
      }

      .live-signage-booking-info.available {
        color: #155724;
        font-style: italic;
      }

      .live-signage-footer {
        flex-shrink: 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: rgba(255, 255, 255, 0.1);
        padding: 2vh 3vh;
        border-radius: 1.2vh;
        backdrop-filter: blur(1vh);
        margin-top: 2vh;
      }

      .live-sign
